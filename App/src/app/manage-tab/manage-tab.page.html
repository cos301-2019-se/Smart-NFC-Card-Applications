<ion-content *ngIf='!loggedIn' padding>
  <ion-progress-bar *ngIf='isBusy' type="indeterminate"></ion-progress-bar>  
  <ion-item>
    <ion-label position="floating">Username/Email</ion-label>
    <ion-input [(ngModel)]='username'></ion-input>
  </ion-item>
  <ion-item>
    <ion-label position="floating">Password</ion-label>
    <ion-input type='password' [(ngModel)]='password'></ion-input>
  </ion-item>
  <br>
  <ion-button expand="block" fill="outline" (click)='login()'>Login</ion-button>
</ion-content>

<ion-content *ngIf='loggedIn' padding>  
  <ion-progress-bar *ngIf='isBusy' type="indeterminate"></ion-progress-bar>  
    
  <ion-item color='secondary' *ngIf='packages.length == 0'>
    <ion-label text-wrap> You have not shared visitor packages with anyone yet. </ion-label>
  </ion-item>

  <ion-list>
    <ion-card *ngFor="let package of packages | filter: 'access': filterService.getFilter()">
        <ion-card-header>
          <ion-icon class="trash" name="trash" (click)='removeVisitorPackage(package.packageId)'></ion-icon>
          <ion-card-title (click)='toggleDetails(package.packageId)'><ion-icon *ngIf='checkInEffect(package.startDate, package.endDate)' color='success' name="calendar"></ion-icon> {{ package.access }}</ion-card-title>
          <ion-card-subtitle>{{ displayDate(package.startDate) }} to {{ displayDate(package.endDate) }}</ion-card-subtitle>
        </ion-card-header>     
        <ion-card-content *ngIf='detailToggles != [] && detailToggles[package.packageId]'>
          <ion-item>
            <ion-label *ngIf='package.wifiSsid !== null' ><ion-icon name="wifi"></ion-icon> Has WiFi access</ion-label>
            <ion-label *ngIf='package.wifiSsid === null' ><ion-icon name="wifi"></ion-icon> Doesn't have WiFi access</ion-label>
          </ion-item>
          <ion-item *ngIf='package.spendingLimit !== null'>
            <ion-label><ion-icon name="card"></ion-icon> Wallet Limit: {{ package.spendingLimit }}</ion-label>
          </ion-item>
          <ion-item *ngIf='package.spendingLimit == null'>
            <ion-label><ion-icon name="card"></ion-icon> Wallet not set up</ion-label>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="outline" (click)='editVisitorPackage(package.packageId)'>Edit Package</ion-button>
          </ion-item>
          <ion-item>
            <ion-button expand="block" fill="outline" (click)='reshare(package.packageId)'>Reshare Package</ion-button>
          </ion-item>
        </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>
